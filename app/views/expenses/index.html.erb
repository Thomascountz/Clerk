<div class="row">
  <div class="col-sm-10 col-sm-offset-1">
    <h1>Your Expenses</h1>

    <%= form_tag expenses_path, method: :get do %>
      <%= hidden_field_tag :direction, params[:direction] %>
      <%= hidden_field_tag :sort, params[:sort] %>
      <div class="form-inline">
        <%= text_field_tag :search, params[:search], class: 'form-control' %>
        <%= submit_tag "Search", class: 'btn btn-primary' %>
      </div>
    <% end %>

    <% if @expenses.empty? %>
      <h2>No Expenses Found.</h2>
      <p><%= link_to "Add an expense", new_expense_path %>.</p>
    <% else %>
      <table class="table">
        <thead>
          <tr>
            <th><%= sortable column: "title" %></th>
            <th><%= sortable column: "created_at", title: "Date" %></th>
            <th>Description</th>
            <th><%= sortable column: "amount" %></th>
            <th></th>
          </tr>
        </thead>
        <% @expenses.each do |expense| %>
          <tbody>
            <tr class="<%= cycle('odd', 'even') %>">
              <td><%= link_to "#{expense.title}", expense_path(expense) %></td>
              <td><%= expense.created_at.strftime("%m/%d/%y") %></td>
              <td>
                <% if expense.description.empty? %>
                  <em>(No Description)</em>
                <% else %>
                  <%= expense.description %>
                <% end %>
              </td>
              <td><%= number_to_currency(expense.amount) %></td>
              <td><%= link_to "edit", edit_expense_path(expense) %></td>
            </tr>
          </tbody>
        <% end %>
      </table>
      <%= will_paginate @expenses %>
    <% end %>
  </div>
</div>